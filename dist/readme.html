<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome file</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="authoring">1. Authoring</h1>
<h2 id="content">Content</h2>
<ul>
<li>
<p>The content editor can be used as <strong>MS Word</strong>.</p>
</li>
<li>
<p>The symbol <code>*</code> signify a <strong>variable</strong>.</p>
</li>
</ul>
<p>e.g. <code>*x</code> will be substituted by the value of <code>x</code> from code.</p>
<ul>
<li>
<p><strong>LaTex</strong> is used in equation objects. See <a href="https://katex.org/docs/supported.html">KaTeX</a> for a list of supported syntax.</p>
</li>
<li>
<p><strong>Answer options</strong> must be listed as bullet points.</p>
</li>
</ul>
<p>The <strong>first option</strong> must be the <strong>correct answer</strong>. e.g.</p>
<ul>
<li>
<p>I only</p>
</li>
<li>
<p>I and II only</p>
</li>
<li>
<p>I and III only</p>
</li>
<li>
<p>I, II and III only</p>
</li>
</ul>
<h2 id="populate">Populate</h2>
<ul>
<li>
<p>All <strong>variables</strong> must be defined here, e.g. <code>x = 1</code>.</p>
</li>
<li>
<p>All <strong>alphabets</strong> (<code>a-z</code>,<code>A-Z</code>) are pre-declared as variables.</p>
</li>
</ul>
<p>Once defined, their values can be substituted in the <strong>content</strong>.</p>
<ul>
<li>Each line should end with a <strong>semicolon</strong>  <code>;</code>.</li>
</ul>
<h2 id="validate">Validate</h2>
<ul>
<li>
<p>All variables <strong>validation</strong> should be done here, e.g. <code>x &lt; 10</code>.</p>
</li>
<li>
<p>Must return a <strong>single Boolean expression</strong>, no matter how complex.</p>
</li>
<li>
<p><strong>One line</strong> should contain only <strong>one condition</strong> for clarity.</p>
</li>
<li>
<p>If no validation is needed, just left it blank.</p>
</li>
<li>
<p>Some common <strong>logical operators</strong>:</p>
</li>
<li>
<p>and: <code>x &amp;&amp; y</code></p>
</li>
<li>
<p>or: <code>x || y</code></p>
</li>
<li>
<p>not: <code>!x</code></p>
</li>
<li>
<p>equal: <code>x === y</code></p>
</li>
<li>
<p>unequal: <code>x !== y</code></p>
</li>
</ul>
<h2 id="processing">Processing</h2>
<ul>
<li>This is for <strong>manipulating the content as html strings</strong>.</li>
</ul>
<p>e.g. <code>question = question.replaceAll('3','three')</code>.</p>
<ul>
<li>
<p>Can access the <strong>question html string</strong> as <code>question</code>.</p>
</li>
<li>
<p>Can access the <strong>solution html string</strong> as <code>solution</code>.</p>
</li>
<li>
<p><strong>Preprocess</strong> code are executed <strong>before</strong> substituting the variables.</p>
</li>
<li>
<p><strong>Postprocess</strong> code are executed <strong>after</strong> substituting the variables.</p>
</li>
</ul>
<h2 id="code-execution-flow">Code Execution Flow</h2>
<ol>
<li>
<p>Run <strong>populate</strong> to define to variables.</p>
</li>
<li>
<p>Run <strong>validate</strong>.</p>
</li>
</ol>
<p>If failed, populate again and again until validation passed. The execution will stop after 1000 failed trials.</p>
<ol start="3">
<li>
<p>Run <strong>preprocess</strong>.</p>
</li>
<li>
<p><strong>Substitute</strong> the variables, and do some smart adjustment:</p>
</li>
</ol>
<ul>
<li>
<p>Round all decimal variables to 5 significant figures.</p>
</li>
<li>
<p>Correct minus signs, e.g. <code>x- -y</code> become <code>x+y</code>.</p>
</li>
<li>
<p>Correct unit coefficient, e.g. <code>x+1y</code> become <code>x+y</code>.</p>
</li>
</ul>
<ol start="5">
<li>
<p>Run <strong>postprocess</strong>.</p>
</li>
<li>
<p><strong>Shuffle</strong> the answer options.</p>
</li>
</ol>
<p>If duplicated options are found, the whole execution will restart from step 1.</p>
<h1 id="reference">2. Reference</h1>
<h2 id="common-javascript-reference">Common JavaScript Reference</h2>
<p>|structure| code</p>
<p>|–|--|</p>
<p>| Declare variable | <code>let myVariable = 1</code> |</p>
<p>| If Then Else | <code>if(condition){DoSomething}else{DoOtherThing}</code> |</p>
<p>| Loop | <code>for(let i=1; i&lt;10; i++){DoSomething}</code> |</p>
<p>| Array | <code>arr = [1,2,3];</code> |</p>
<p>| Array Element | <code>x = arr[0]; y = arr[1];</code> |</p>
<p>| Array Deconstruction | <code>[a,b,c]=[1,2,3]</code> (same as <code>a=1;b=2;c=3;</code>) |</p>
<p>| Print Debug | <code>console.log(x)</code> |</p>
<h2 id="common-latex-reference">Common LaTex Reference</h2>
<p>|symbol| code | LaTex |</p>
<p>|–|--|–|</p>
<p>| Superscript | <code>a^{b}</code> | <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mi>b</mi></msup></mrow><annotation encoding="application/x-tex">a^{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.849108em; vertical-align: 0em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.849108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span></span></span></span></span></span> |</p>
<p>| Subscript| <code>a_{b}</code> | <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>b</mi></msub></mrow><annotation encoding="application/x-tex">a_{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.58056em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.336108em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> |</p>
<p>| Fraction| <code>\dfrac{a}{b}</code> | <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mi>a</mi><mi>b</mi></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{a}{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.79356em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.10756em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span> |</p>
<p>| Square Root| <code>\sqrt{x}</code> | <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>x</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.04em; vertical-align: -0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.80028em;"><span class="svg-align" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord" style="padding-left: 0.833em;"><span class="mord mathnormal">x</span></span></span><span class="" style="top: -2.76028em;"><span class="pstrut" style="height: 3em;"></span><span class="hide-tail" style="min-width: 0.853em; height: 1.08em;"><svg width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.23972em;"><span class=""></span></span></span></span></span></span></span></span></span> |</p>
<p>| Equation Alignment| <code>\begin{aligned} 2x-4&amp;=10 \\ x&amp;=7 \end{aligned}</code> | <span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.2500em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>2</mn><mi>x</mi><mo>−</mo><mn>4</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>10</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>x</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>7</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} 2x-4&amp;=10 \\ x&amp;=7 \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 3em; vertical-align: -1.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.75em;"><span class="" style="top: -3.91em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">4</span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.75em;"><span class="" style="top: -3.91em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">10</span></span></span><span class="" style="top: -2.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.25em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span> |</p>
<h2 id="printing-variables">Printing Variables</h2>
<p>| type | variable | print code | result |</p>
<p>|–|--|–|--|</p>
<p>|number| <code>a = 1.23</code> | <code>*a</code> | 1.23 |</p>
<p>|string| <code>a = "hello"</code> | <code>*a</code> | hello |</p>
<p>|boolean| <code>a = true</code> | <code>*a</code> | ✓ |</p>
<p>|boolean| <code>a = false</code> | <code>*a</code> | ✕ |</p>
<p>|coordinates| <code>a = [1,2]</code> | <code>*a</code> | (1, 2) |</p>
<p>|fraction| <code>a = 0.5</code> | <code>*/a</code> | \dfrac{1}{2} |</p>
<p>| sci notation |<code>a = 0.0000123</code> | <code>**a</code> | 1.23 \times 10^{-5} |</p>
<p>| bracket negative|<code>a = -2</code>|<code>*(a)</code>| (-2)|</p>
<p>| bracket negative|<code>a = 2</code>|<code>*(a)</code>| 2|</p>
<p>|sign|<code>a = 5</code>|<code>*+a</code>|+|</p>
<p>|sign|<code>a = -5</code>|<code>*+a</code>|-|</p>
<h1 id="advance-functions">3. Advance Functions</h1>
<h2 id="inline-code">Inline Code</h2>
<ul>
<li><strong>JavaScript code</strong> can be written in <strong>content</strong> using <code>*{...}</code> .</li>
</ul>
<p>For example, <code>*{1+1}</code> will print <code>2</code>.</p>
<ul>
<li><code>*\{...\}</code> do the same as <code>*{...}</code>, but also display the brackets in equation object.</li>
</ul>
<h2 id="sections">Sections</h2>
<p><strong>Sections</strong> can be used in <strong>content</strong>:</p>
<blockquote>
<p>##1.1</p>
</blockquote>
<blockquote>
<p>section 1.1 here.</p>
</blockquote>
<blockquote>
<p>##</p>
</blockquote>
<blockquote>
<p>##1.2</p>
</blockquote>
<blockquote>
<p>section 1.2 here.</p>
</blockquote>
<blockquote>
<p>##</p>
</blockquote>
<p>If <code>sections = [[1,2]]</code> is defined in <strong>populate</strong>, only section 1.2 will be shown.</p>
<h2 id="options">Options</h2>
<h3 id="with-one-option">With One Option</h3>
<p>If the <strong>question</strong> contains only one answer option:</p>
<blockquote>
<p>What is 1+1?</p>
</blockquote>
<blockquote>
<ul>
<li>*a</li>
</ul>
</blockquote>
<p>and <strong>populate</strong> contains</p>
<pre><code>
a = 2

options = {a: [3, 4, 5]}

</code></pre>
<p>then it’s equivalent to</p>
<blockquote>
<p>What is 1+1?</p>
</blockquote>
<blockquote>
<ul>
<li>2</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>3</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>4</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>5</li>
</ul>
</blockquote>
<p>If the options is left blank: <code>options = {a}</code>, then <code>RndShake()</code> will be called on <code>a</code> to generate 3 random options.</p>
<h3 id="with-two-options">With Two Options</h3>
<p>If the <strong>question</strong> contains only two answer options:</p>
<blockquote>
<p>What is 1+1?</p>
</blockquote>
<blockquote>
<ul>
<li>*a</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>-*a</li>
</ul>
</blockquote>
<p>and <strong>populate</strong> contains</p>
<pre><code>
a = 2

options = {a: [3]}

</code></pre>
<p>then it’s equivalent to</p>
<blockquote>
<p>What is 1+1?</p>
</blockquote>
<blockquote>
<ul>
<li>2</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>-2</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>3</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>-3</li>
</ul>
</blockquote>
<h2 id="answer">Answer</h2>
<p>Normally, the firstion option must be the correct answer. This can be changed by:</p>
<p><code>answer = "B"</code></p>
<p>so that the second option is the correct answer.</p>
<h2 id="answer-option-mapping">Answer Option Mapping</h2>
<p>To get the answer option key after shuffling, use <code>{#A}</code>.</p>
<p>For example, if option A is shuffled to C, then <code>{#A}</code> will print <code>C</code>.</p>
<h3 id="this-page-is-rendered-by-httpsstackedit.io">This page is rendered by <a href="https://stackedit.io/">https://stackedit.io/</a></h3>
</div>
</body>

</html>
