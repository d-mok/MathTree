<h1>1. Authoring</h1>
<h2>Content</h2>
<ul>
<li>The content editor can be used as  <strong>MS Word</strong>.</li>
<li>The symbol <code>*</code> signify a  <strong>variable</strong>.
e.g. <code>*x</code> will be substituted by the value of  <code>x</code>  from code.</li>
<li><strong>LaTex</strong>  is used in equation objects. See  <a href="https://katex.org/docs/supported.html">KaTeX</a>  for a list of supported syntax.</li>
<li><strong>Answer options</strong>  must be listed as bullet points.
The  <strong>first option</strong>  must be the  <strong>correct answer</strong>. e.g.
<ul>
<li>I only</li>
<li>I and II only</li>
<li>I and III only</li>
<li>I, II and III only</li>
</ul>
</li>
</ul>
<h2>Populate</h2>
<ul>
<li>All  <strong>variables</strong>  must be defined here, e.g. <code>x = 1</code>.</li>
<li>All  <strong>alphabets</strong>  (<code>a-z</code>,<code>A-Z</code>) are pre-declared as variables.
Once defined, their values can be substituted in the <strong>content</strong>.</li>
<li>Each line should end with a  <strong>semicolon</strong>  <code>;</code>.</li>
</ul>
<h2>Validate</h2>
<ul>
<li>All variables  <strong>validation</strong>  should be done here, e.g. <code>x &lt; 10</code>.</li>
<li>Must return a <strong>single Boolean expression</strong>, no matter how complex.</li>
<li><strong>One line</strong>  should contain only  <strong>one condition</strong>  for clarity.</li>
<li>If no validation is needed, just left it blank.</li>
<li>Some common  <strong>logical operators</strong>:
<ul>
<li>and:  <code>x &amp;&amp; y</code></li>
<li>or:  <code>x || y</code></li>
<li>not:  <code>!x</code></li>
<li>equal:  <code>x === y</code></li>
<li>unequal:  <code>x !== y</code></li>
</ul>
</li>
</ul>
<h2>Processing</h2>
<ul>
<li>This is for  <strong>manipulating the content as html strings</strong>.
e.g. <code>question = question.replaceAll('3','three')</code>.</li>
<li>Can access the  <strong>question html string</strong>  as  <code>question</code>.</li>
<li>Can access the  <strong>solution html string</strong>  as  <code>solution</code>.</li>
<li><strong>Preprocess</strong>  code are executed  <strong>before</strong>  substituting the variables.</li>
<li><strong>Postprocess</strong>  code are executed  <strong>after</strong>  substituting the variables.</li>
</ul>
<h2>Code Execution Flow</h2>
<ol>
<li>Run <strong>populate</strong>  to define to variables.</li>
<li>Run <strong>validate</strong>.<br>
If failed, populate again and again until validation passed. The execution will stop after 1000 failed trials.</li>
<li>Run <strong>preprocess</strong>.</li>
<li><strong>Substitute</strong>  the variables, and do some smart adjustment:
<ul>
<li>Round all decimal variables to 5 significant figures.</li>
<li>Correct minus signs, e.g. <code>x- -y</code> become <code>x+y</code>.</li>
<li>Correct unit coefficient, e.g. <code>x+1y</code> become <code>x+y</code>.</li>
</ul>
</li>
<li>Run <strong>postprocess</strong>.</li>
<li><strong>Shuffle</strong>  the answer options.<br>
If duplicated options are found, the whole execution will restart from step 1.</li>
</ol>
<h1>2. Reference</h1>
<h2>Common JavaScript Reference</h2>
<table>
<thead>
<tr>
<th>structure</th>
<th>code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Declare variable</td>
<td><code>let myVariable = 1</code></td>
</tr>
<tr>
<td>If Then Else</td>
<td><code>if(condition){DoSomething}else{DoOtherThing}</code></td>
</tr>
<tr>
<td>Loop</td>
<td><code>for(let i=1; i&lt;10; i++){DoSomething}</code></td>
</tr>
<tr>
<td>Array</td>
<td><code>arr = [1,2,3];</code></td>
</tr>
<tr>
<td>Array Element</td>
<td><code>x = arr[0]; y = arr[1];</code></td>
</tr>
<tr>
<td>Array Deconstruction</td>
<td><code>[a,b,c]=[1,2,3]</code>  (same as  <code>a=1; b=2; c=3;</code>)</td>
</tr>
<tr>
<td>Array Spreading</td>
<td><code>sum(...[1,2,3])</code> (same as <code>sum(1,2,3)</code>)</td>
</tr>
<tr>
<td>Print Debug</td>
<td><code>console.log(x)</code></td>
</tr>
</tbody>
</table>
<h2>Common LaTex Reference</h2>
<table>
<thead>
<tr>
<th>symbol</th>
<th>code</th>
<th>LaTex</th>
</tr>
</thead>
<tbody>
<tr>
<td>Superscript</td>
<td><code>a^{b}</code></td>
<td>$a^{b}$</td>
</tr>
<tr>
<td>Subscript</td>
<td><code>a_{b}</code></td>
<td>$a_{b}$</td>
</tr>
<tr>
<td>Fraction</td>
<td><code>\dfrac{a}{b}</code></td>
<td>$\dfrac{a}{b}$</td>
</tr>
<tr>
<td>Square Root</td>
<td><code>\sqrt{x}</code></td>
<td>$\sqrt{x}$</td>
</tr>
<tr>
<td>Equation Alignment</td>
<td><code>\begin{aligned} 2x-4&amp;=10 \\ x&amp;=7 \end{aligned}</code></td>
<td>$\begin{aligned} 2x-4&amp;=10 \ x&amp;=7 \end{aligned}$</td>
</tr>
</tbody>
</table>
<h2>Printing Variables</h2>
<table>
<thead>
<tr>
<th>type</th>
<th>variable</th>
<th>print code</th>
<th>result</th>
</tr>
</thead>
<tbody>
<tr>
<td>number</td>
<td><code>a = 1.23</code></td>
<td><code>*a</code></td>
<td>1.23</td>
</tr>
<tr>
<td>string</td>
<td><code>a = &quot;hello&quot;</code></td>
<td><code>*a</code></td>
<td>hello</td>
</tr>
<tr>
<td>boolean</td>
<td><code>a = true</code></td>
<td><code>*a</code></td>
<td>✓</td>
</tr>
<tr>
<td>boolean</td>
<td><code>a = false</code></td>
<td><code>*a</code></td>
<td>✕</td>
</tr>
<tr>
<td>coordinates</td>
<td><code>a = [1,2]</code></td>
<td><code>*a</code></td>
<td>(1, 2)</td>
</tr>
<tr>
<td>combo</td>
<td><code>a = [true,true,false]</code></td>
<td><code>*a</code></td>
<td>I and II only</td>
</tr>
<tr>
<td>fraction</td>
<td><code>a = 0.5</code></td>
<td><code>*/a</code></td>
<td>\dfrac{1}{2}</td>
</tr>
<tr>
<td>sci notation</td>
<td><code>a = 0.0000123</code></td>
<td><code>**a</code></td>
<td>1.23 \times 10^{-5}</td>
</tr>
<tr>
<td>bracket negative</td>
<td><code>a = -2</code></td>
<td><code>*(a)</code></td>
<td>(-2)</td>
</tr>
<tr>
<td>bracket negative</td>
<td><code>a = 2</code></td>
<td><code>*(a)</code></td>
<td>2</td>
</tr>
<tr>
<td>sign</td>
<td><code>a = 5</code></td>
<td><code>*+a</code></td>
<td>+</td>
</tr>
<tr>
<td>sign</td>
<td><code>a = -5</code></td>
<td><code>*+a</code></td>
<td>-</td>
</tr>
</tbody>
</table>
<h1>3. Advance Functions</h1>
<h2>Inline Code</h2>
<ul>
<li><strong>JavaScript code</strong> can be written in <strong>content</strong> using <code>*{...}</code> .
For example, <code>*{1+1}</code> will print <code>2</code>.</li>
<li><code>*\{...\}</code> do the same as <code>*{...}</code>, but also display the brackets in equation object.</li>
</ul>
<h2>Sections</h2>
<p><strong>Sections</strong> can be used in <strong>content</strong>:</p>
<blockquote>
<p>##1.1<br>
section 1.1 here.<br>
##<br>
##1.2<br>
section 1.2 here.<br>
##</p>
</blockquote>
<p>If <code>sections = [[1,2]]</code> is defined in <strong>populate</strong>, only section 1.2 will be shown.</p>
<h2>Conditional Sections</h2>
<p>We can decide whether to show a section or not by a condition: <code>##{condition}</code></p>
<blockquote>
<p>##{true}<br>
This will be shown.<br>
##</p>
</blockquote>
<blockquote>
<p>##{false}<br>
This will NOT be shown.<br>
##</p>
</blockquote>
<h2>Options</h2>
<h3>With One Option</h3>
<p>If the <strong>question</strong> contains only one answer option:</p>
<blockquote>
<p>What is 1+1?</p>
<ul>
<li>*a</li>
</ul>
</blockquote>
<p>and <strong>populate</strong> contains</p>
<pre><code>a = 2
options = {a: [3, 4, 5]}
</code></pre>
<p>then it's equivalent to</p>
<blockquote>
<p>What is 1+1?</p>
<ul>
<li>2</li>
<li>3</li>
<li>4</li>
<li>5</li>
</ul>
</blockquote>
<p>If the options is left blank: <code>options = {a}</code>, then <code>RndShake()</code>  will be called on <code>a</code> to generate 3 random options.</p>
<h3>With Two Options</h3>
<p>If the <strong>question</strong> contains only two answer options:</p>
<blockquote>
<p>What is 1+1?</p>
<ul>
<li>*a</li>
<li>-*a</li>
</ul>
</blockquote>
<p>and <strong>populate</strong> contains</p>
<pre><code>a = 2
options = {a: [3]}
</code></pre>
<p>then it's equivalent to</p>
<blockquote>
<p>What is 1+1?</p>
<ul>
<li>2</li>
<li>-2</li>
<li>3</li>
<li>-3</li>
</ul>
</blockquote>
<h2>Answer</h2>
<p>Normally, the firstion option must be the correct answer. This can be changed by:
<code>answer = &quot;B&quot;</code>
so that the second option is the correct answer.</p>
<h2>Answer Option Mapping</h2>
<p>To get the answer option key after shuffling, use <code>{#A}</code>.
For example, if option A is shuffled to C, then <code>{#A}</code> will print <code>C</code>.</p>
<h3>This page is rendered by https://stackedit.io/</h3>
