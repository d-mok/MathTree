<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Mock MathSoil</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='../dist/dev/mathtree.js'></script>
</head>

<body>
    <a href="https://d-mok.github.io/MathTree/typedoc/">Doc Link</a>
    <textarea id="code" rows="40" cols="100" spellcheck="false">
    </textarea>
    <div>
        <button type="button" onClick="draw()">Draw</button>
        <button type="button" onClick="run()">Run</button>
        <button type="button" onClick="store()">Store</button>
        <button type="button" onClick="retrieve()">Retrieve</button>
    </div>

    <div id="img"></div>

    <script>
        let template = `const pen = new Pen();

pen.range.set([-5,5],[-5,5]);
pen.size.set(1);

pen.axis.x();
pen.axis.y();
pen.grid.x();
pen.grid.y();
pen.tick.x();
pen.tick.y();`

        document.getElementById("code").value = template

        function code() {
            return document.getElementById("code").value
        }

        function draw() {
            let q = '<img src="img" style="border:1px solid #000000" />';
            eval(code() + '\n document.getElementById("img").innerHTML = pen.export(q,"img")');
        }


        function run() {
            eval(code());
        }

        function store() {
            localStorage.setItem('devCode', code());
            console.log('code stored!')
        }

        function retrieve() {
            localStorage.getItem('devCode')
        }


    </script>



</body>

</html>